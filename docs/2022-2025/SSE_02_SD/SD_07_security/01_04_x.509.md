# X.509
## Overview
- https://www.youtube.com/watch?v=aNyP-DnaPR0
- Digital ID card signed by CA 
- passport Analogy
- browser are loaded with **public key of CA**, use to validate cert received from server
- http --> tls --> SSL handshake
  - Server shares **X.509 cert + public key embedded init**, to client.
  - public key helps to mutually create **asymmetric key** (ephemeral) [here](03_protocol_https_tls.md)
  - use it to encrypt session data, later.
  - x.509 helps to prove identity and thus server.
    - trust server
    - hence trust public key
    - since, publicKey could come from attacker.

## mTLS - overview
- **Think of reverse TLS**
  - client send its X.509 to server
  - and proves it authenticity to server
  - this could be alternative to --> vault[password, SSH_key, API_Token, etc ]
  - this mTLS ğŸ‘ˆğŸ»
- sponsor :: `Teleport` is tool, creates **short-live certificates** ğŸ‘ˆğŸ»

## X.509 vs Vault
Vault (from hashicorp, cyberArk, )
- engineer check out secret from vault
- use it for authentication
- rotate it ğŸ‘ˆğŸ»
- audit log, centralized, 
- Assume : can be stolen and misused by contractor, one day. create backdoor

X.509
- create cert with hosted domain
- sign it with CA-private-key
- keep it on certificate store
- client verify with CA-public-key
- renew it ğŸ‘ˆğŸ»
- useless if stolen
- winner âœ”ï¸

## challenges : x.509
- expiration feature
- generate cert, mantain/keep , renew,  etc
- x.509 for server (few)
  - x.509 for client (so many). :(
  - stick to vault :)

---
## references
- [public cert](https://chatgpt.com/c/686a0fc6-cd78-800d-bf23-300056809998) 
- [long discussion ](https://chatgpt.com/c/686a2ec5-1c7c-800d-8895-4e5e924a4e03) 
- [public vs private cert](https://chatgpt.com/c/686a0fc6-cd78-800d-bf23-300056809998)
- **topics to check**:
  - private cert (x.502)
  - public certificate
  - CA
  - intermediate cert
  - leaf cert
  - `Digicert`
  - ECS :AWS ACM has integration with API gateway, ALB, CF:distribution
  - EKS - cert-manager + update ingress object
  - 1/2 way SSL
  - mTls - reverse TLS
